{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dulithaw/Downloads/Quiz/slns-sayurala/app/actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { prisma } from \"@/lib/db\";\r\nimport { cookies } from \"next/headers\";\r\n\r\nexport async function loginUser(officialId: string, name: string) {\r\n    try {\r\n        // Upsert user (create if not exists)\r\n        const user = await prisma.user.upsert({\r\n            where: { officialId },\r\n            update: { name }, // Update name if it changed\r\n            create: {\r\n                officialId,\r\n                name,\r\n            },\r\n        });\r\n\r\n        // Create active session\r\n        await prisma.activeSession.upsert({\r\n            where: { userId: user.id },\r\n            update: { lastActive: new Date() },\r\n            create: { userId: user.id },\r\n        });\r\n\r\n        // Set cookie for simple auth\r\n        const cookieStore = await cookies();\r\n        cookieStore.set('userId', user.id, { secure: false, httpOnly: true, path: '/' });\r\n\r\n        return { success: true, userId: user.id };\r\n    } catch (error) {\r\n        console.error(\"Login Error:\", error);\r\n        return { success: false, error: \"Failed to login\" };\r\n    }\r\n}\r\n\r\nexport async function submitQuizResult(\r\n    userId: string,\r\n    moduleId: string,\r\n    score: number,\r\n    totalQuestions: number,\r\n    answers: Record<string, number>\r\n) {\r\n    try {\r\n        const attempt = await prisma.quizAttempt.create({\r\n            data: {\r\n                userId,\r\n                moduleId,\r\n                score,\r\n                answers: JSON.stringify(answers),\r\n                isCompleted: true,\r\n                completedAt: new Date(),\r\n            }\r\n        });\r\n\r\n        // Update session\r\n        await prisma.activeSession.update({\r\n            where: { userId },\r\n            data: {\r\n                lastActive: new Date(),\r\n                currentModuleId: null // Clear current activity\r\n            }\r\n        });\r\n\r\n        return { success: true, attemptId: attempt.id };\r\n    } catch (error) {\r\n        console.error(\"Submit Error:\", error);\r\n        return { success: false, error: \"Failed to save result\" };\r\n    }\r\n}\r\n\r\nexport async function updateSessionActivity(userId: string, moduleId: string, currentQuestionIndex: number = 0, totalQuestions: number = 50) {\r\n    try {\r\n        console.log(\"ðŸ”„ Updating session:\", { userId, moduleId, currentQuestionIndex, totalQuestions });\r\n        await prisma.activeSession.update({\r\n            where: { userId },\r\n            data: {\r\n                lastActive: new Date(),\r\n                currentModuleId: moduleId,\r\n                currentQuestionIndex,\r\n                totalQuestions\r\n            }\r\n        });\r\n        console.log(\"âœ… Session updated successfully\");\r\n    } catch (e) {\r\n        // Ignore session update errors (non-critical)\r\n        console.error(\"âŒ Session update failed\", e);\r\n    }\r\n}\r\n\r\nexport async function getAdminDashboardData() {\r\n    try {\r\n        const users = await prisma.user.findMany({\r\n            where: {\r\n                officialId: {\r\n                    not: 'ADMIN'\r\n                }\r\n            },\r\n            include: { activeSession: true, attempts: true },\r\n            orderBy: { createdAt: 'desc' }\r\n        });\r\n\r\n        const attempts = await prisma.quizAttempt.findMany({\r\n            include: { user: true },\r\n            orderBy: { completedAt: 'desc' },\r\n            take: 50 // Latest 50\r\n        });\r\n\r\n        // Transform for UI\r\n        const formattedUsers = users.map((u: any) => {\r\n            let status = \"Idle\";\r\n            let liveProgress = null;\r\n\r\n            if (u.activeSession) {\r\n                const timeDiff = new Date().getTime() - new Date(u.activeSession.lastActive).getTime();\r\n                console.log(`ðŸ‘¤ User ${u.name}: timeDiff=${timeDiff}ms, lastActive=${u.activeSession.lastActive}`);\r\n                if (timeDiff < 5 * 60 * 1000) { // Active in last 5 mins\r\n                    status = \"Active\";\r\n                    if (u.activeSession.currentModuleId) {\r\n                        status = \"In Quiz\";\r\n                        liveProgress = {\r\n                            module: u.activeSession.currentModuleId,\r\n                            current: u.activeSession.currentQuestionIndex || 0,\r\n                            total: u.activeSession.totalQuestions || 50,\r\n                            percentage: Math.round(((u.activeSession.currentQuestionIndex || 0) / (u.activeSession.totalQuestions || 50)) * 100)\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                id: u.id,\r\n                officialId: u.officialId,\r\n                name: u.name,\r\n                status,\r\n                liveProgress,\r\n                history: u.attempts.map((a: any) => {\r\n                    const diff = a.completedAt ? new Date(a.completedAt).getTime() - new Date(a.startedAt).getTime() : 0;\r\n                    const durationMinutes = Math.floor(diff / 60000);\r\n                    const durationSeconds = Math.floor((diff % 60000) / 1000);\r\n\r\n                    return {\r\n                        id: a.id,\r\n                        module: a.moduleId,\r\n                        score: a.score || 0,\r\n                        total: 50,\r\n                        startedAt: new Date(a.startedAt).toLocaleString(),\r\n                        completedAt: a.completedAt ? new Date(a.completedAt).toLocaleString() : \"In Progress\",\r\n                        duration: a.completedAt ? `${durationMinutes}m ${durationSeconds}s` : \"N/A\"\r\n                    };\r\n                })\r\n            };\r\n        });\r\n\r\n        const formattedAttempts = attempts.map((a: any) => ({\r\n            id: a.id,\r\n            user: a.user.officialId,\r\n            module: a.moduleId,\r\n            score: a.score || 0,\r\n            total: 50, // Assuming 50 for now or fetch from question count\r\n            date: a.completedAt ? new Date(a.completedAt).toISOString().split('T')[0] : 'N/A'\r\n        }));\r\n\r\n        return { success: true, users: formattedUsers, attempts: formattedAttempts };\r\n    } catch (error) {\r\n        console.error(\"Admin Data Error:\", error);\r\n        return { success: false, users: [], attempts: [] };\r\n    }\r\n}\r\n\r\nexport async function logoutUser() {\r\n    const cookieStore = await cookies();\r\n    cookieStore.delete('userId');\r\n    return { success: true };\r\n}\r\n\r\nexport async function loginAdmin() {\r\n    const cookieStore = await cookies();\r\n    // Non-secure for local IP access\r\n    cookieStore.set('userId', 'ADMIN-SESSION-TOKEN', { secure: false, httpOnly: true, path: '/' });\r\n    return { success: true };\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAyFsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,yDAAA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dulithaw/Downloads/Quiz/slns-sayurala/app/admin/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Users, BarChart2, Activity, Search, LogOut, Clock, X, FileText, CheckCircle } from \"lucide-react\";\r\nimport { getAdminDashboardData } from \"@/app/actions\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n// Mock Data / Types\r\ninterface User {\r\n    id: string;\r\n    officialId: string;\r\n    name: string;\r\n    status: string;\r\n    liveProgress?: {\r\n        module: string;\r\n        current: number;\r\n        total: number;\r\n        percentage: number;\r\n    };\r\n    history: {\r\n        id: string;\r\n        module: string;\r\n        score: number;\r\n        total: number;\r\n        startedAt: string;\r\n        completedAt: string;\r\n        duration: string;\r\n    }[];\r\n}\r\n\r\ninterface Attempt {\r\n    id: string;\r\n    user: string;\r\n    module: string;\r\n    score: number;\r\n    total: number;\r\n    date: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n    const [activeTab, setActiveTab] = useState<\"users\" | \"history\" | \"live\">(\"live\");\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [attempts, setAttempts] = useState<Attempt[]>([]);\r\n    const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n    const router = useRouter();\r\n\r\n    // Real-time Updates (Polling)\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            const result = await getAdminDashboardData();\r\n            if (result.success) {\r\n                // @ts-ignore\r\n                setUsers(result.users);\r\n                // @ts-ignore\r\n                setAttempts(result.attempts);\r\n            }\r\n        };\r\n\r\n        fetchData(); // Initial call\r\n        const interval = setInterval(fetchData, 3000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        router.push(\"/admin/login\");\r\n    };\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-navy-900 text-steel-100 relative overflow-hidden flex flex-col\">\r\n\r\n            {/* Background Decor - Consistent with Login */}\r\n            <div className=\"absolute inset-0 z-0\">\r\n                <Image\r\n                    src=\"/ship.png\"\r\n                    alt=\"Background\"\r\n                    fill\r\n                    className=\"object-cover opacity-10 mix-blend-overlay\"\r\n                    priority\r\n                />\r\n                {/* Stronger overlay for readability of data */}\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-navy-900 via-navy-950/90 to-navy-900/90\" />\r\n            </div>\r\n\r\n            {/* User Details Modal */}\r\n            <AnimatePresence>\r\n                {selectedUser && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\"\r\n                            onClick={() => setSelectedUser(null)}\r\n                        />\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                            className=\"relative w-full max-w-4xl bg-navy-800 border border-gold-600/30 rounded-lg shadow-2xl overflow-hidden max-h-[90vh] flex flex-col\"\r\n                        >\r\n                            {/* Modal Header */}\r\n                            <div className=\"p-6 border-b border-navy-600 flex justify-between items-start bg-navy-900/50\">\r\n                                <div>\r\n                                    <h2 className=\"text-2xl font-bold text-white font-heading tracking-wide flex items-center gap-3\">\r\n                                        <Users className=\"w-6 h-6 text-gold-500\" />\r\n                                        {selectedUser.name}\r\n                                    </h2>\r\n                                    <p className=\"text-gold-500/80 font-mono mt-1 text-sm tracking-widest\">OFFICIAL ID: {selectedUser.officialId}</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => setSelectedUser(null)}\r\n                                    className=\"p-2 hover:bg-navy-700 rounded-full text-steel-400 hover:text-white transition-colors\"\r\n                                >\r\n                                    <X className=\"w-6 h-6\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Modal Content */}\r\n                            <div className=\"p-6 overflow-y-auto flex-1\">\r\n                                <h3 className=\"text-sm font-bold text-steel-300 uppercase tracking-widest mb-4 flex items-center gap-2\">\r\n                                    <FileText className=\"w-4 h-4 text-gold-500\" />\r\n                                    Performance History\r\n                                </h3>\r\n\r\n                                {selectedUser.history && selectedUser.history.length > 0 ? (\r\n                                    <table className=\"w-full text-left border-collapse\">\r\n                                        <thead>\r\n                                            <tr className=\"bg-navy-900/50 text-xs text-steel-400 uppercase tracking-wider border-b border-navy-700\">\r\n                                                <th className=\"p-4 font-semibold\">Module</th>\r\n                                                <th className=\"p-4 font-semibold\">Result</th>\r\n                                                <th className=\"p-4 font-semibold\">Started</th>\r\n                                                <th className=\"p-4 font-semibold\">Completed</th>\r\n                                                <th className=\"p-4 font-semibold text-right\">Duration</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody className=\"divide-y divide-navy-700/30 text-sm\">\r\n                                            {selectedUser.history.map((attempt) => (\r\n                                                <tr key={attempt.id} className=\"hover:bg-navy-700/20 transition-colors\">\r\n                                                    <td className=\"p-4 text-steel-100 font-medium\">{attempt.module}</td>\r\n                                                    <td className=\"p-4\">\r\n                                                        <span className={`inline-flex items-center gap-2 px-2 py-1 rounded border ${(attempt.score / attempt.total) >= 0.5\r\n                                                            ? \"bg-emerald-500/10 border-emerald-500/20 text-emerald-400\"\r\n                                                            : \"bg-red-500/10 border-red-500/20 text-red-400\"\r\n                                                            }`}>\r\n                                                            <span className=\"font-bold\">{attempt.score}</span>\r\n                                                            <span className=\"text-xs opacity-70\">/ {attempt.total}</span>\r\n                                                        </span>\r\n                                                    </td>\r\n                                                    <td className=\"p-4 text-steel-400 font-mono text-xs\">{attempt.startedAt}</td>\r\n                                                    <td className=\"p-4 text-steel-400 font-mono text-xs\">{attempt.completedAt}</td>\r\n                                                    <td className=\"p-4 text-right font-mono text-gold-400/80 flex items-center justify-end gap-2\">\r\n                                                        <Clock className=\"w-3 h-3\" />\r\n                                                        {attempt.duration}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))}\r\n                                        </tbody>\r\n                                    </table>\r\n                                ) : (\r\n                                    <div className=\"p-12 text-center border border-dashed border-navy-600 rounded-lg bg-navy-900/20\">\r\n                                        <p className=\"text-steel-500 italic\">No assessment history found for this officer.</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Subtle Grid Background */}\r\n            <div className=\"absolute inset-0 bg-[linear-gradient(to_right,#112240_1px,transparent_1px),linear-gradient(to_bottom,#112240_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] opacity-20 pointer-events-none z-0\" />\r\n\r\n            {/* Top Navigation Bar */}\r\n            <header className=\"relative z-20 bg-navy-950/80 backdrop-blur-md border-b border-navy-700 shadow-lg\">\r\n                <div className=\"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"relative w-12 h-12\">\r\n                            <Image\r\n                                src=\"/logo.png\"\r\n                                alt=\"SLNS Logo\"\r\n                                fill\r\n                                className=\"object-contain drop-shadow-md\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <h1 className=\"text-xl font-bold text-white font-heading tracking-wider\">COMMAND DASHBOARD</h1>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <div className=\"h-[1px] w-8 bg-gold-600/50\" />\r\n                                <p className=\"text-gold-500/80 text-[10px] uppercase tracking-[0.2em] font-medium\">Official Portal</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-6\">\r\n                        <div className=\"px-3 py-1.5 bg-navy-900/50 rounded-full border border-navy-700 flex items-center gap-2\">\r\n                            <span className=\"relative flex h-2 w-2\">\r\n                                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\r\n                                <span className=\"relative inline-flex rounded-full h-2 w-2 bg-green-500\"></span>\r\n                            </span>\r\n                            <span className=\"text-[10px] uppercase font-bold text-steel-300 tracking-wider\">System Online</span>\r\n                        </div>\r\n                        <button\r\n                            onClick={handleLogout}\r\n                            className=\"flex items-center gap-2 text-xs font-bold text-red-400 hover:text-red-300 transition-colors uppercase tracking-wider\"\r\n                        >\r\n                            <LogOut className=\"w-4 h-4\" />\r\n                            Logout\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Main Layout */}\r\n            <div className=\"relative z-10 flex-1 max-w-7xl mx-auto w-full p-6 grid grid-cols-1 lg:grid-cols-12 gap-8\">\r\n\r\n                {/* Sidebar Navigation */}\r\n                <nav className=\"lg:col-span-3 space-y-3\">\r\n                    <div className=\"bg-navy-800/50 backdrop-blur-sm border border-navy-600/50 rounded-lg p-4 shadow-xl\">\r\n                        <p className=\"text-xs font-semibold text-steel-400 uppercase tracking-widest mb-4 pl-2\">Modules</p>\r\n                        <div className=\"space-y-2\">\r\n                            <button\r\n                                onClick={() => setActiveTab(\"live\")}\r\n                                className={`w-full flex items-center gap-3 p-3 rounded-md transition-all border ${activeTab === \"live\"\r\n                                    ? \"bg-navy-700 border-gold-600/50 text-gold-400 shadow-md\"\r\n                                    : \"bg-transparent border-transparent hover:bg-navy-700/50 text-steel-300 hover:text-white\"\r\n                                    }`}\r\n                            >\r\n                                <Activity className=\"w-4 h-4 animate-pulse\" />\r\n                                <span className=\"text-sm font-bold tracking-wide\">Live Monitor</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setActiveTab(\"users\")}\r\n                                className={`w-full flex items-center gap-3 p-3 rounded-md transition-all border ${activeTab === \"users\"\r\n                                    ? \"bg-navy-700 border-gold-600/50 text-gold-400 shadow-md\"\r\n                                    : \"bg-transparent border-transparent hover:bg-navy-700/50 text-steel-300 hover:text-white\"\r\n                                    }`}\r\n                            >\r\n                                <Users className=\"w-4 h-4\" />\r\n                                <span className=\"text-sm font-bold tracking-wide\">Personnel Status</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setActiveTab(\"history\")}\r\n                                className={`w-full flex items-center gap-3 p-3 rounded-md transition-all border ${activeTab === \"history\"\r\n                                    ? \"bg-navy-700 border-gold-600/50 text-gold-400 shadow-md\"\r\n                                    : \"bg-transparent border-transparent hover:bg-navy-700/50 text-steel-300 hover:text-white\"\r\n                                    }`}\r\n                            >\r\n                                <BarChart2 className=\"w-4 h-4\" />\r\n                                <span className=\"text-sm font-bold tracking-wide\">Assessment Logs</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </nav>\r\n\r\n                {/* Content Area */}\r\n                <section className=\"lg:col-span-9\">\r\n                    <motion.div\r\n                        key={activeTab}\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 0.3 }}\r\n                        className=\"bg-navy-800/80 backdrop-blur-md border border-navy-600/50 rounded-lg overflow-hidden shadow-2xl\"\r\n                    >\r\n                        {/* Tab Header */}\r\n                        <div className=\"px-6 py-4 border-b border-navy-700/50 flex justify-between items-center bg-navy-900/30\">\r\n                            <h2 className=\"text-lg font-bold text-white tracking-wide uppercase flex items-center gap-2\">\r\n                                {activeTab === \"live\" && <><Activity className=\"w-5 h-5 text-gold-500\" /> Live Operations</>}\r\n                                {activeTab === \"users\" && <><Users className=\"w-5 h-5 text-gold-500\" /> Personnel Database</>}\r\n                                {activeTab === \"history\" && <><BarChart2 className=\"w-5 h-5 text-gold-500\" /> Assessment History</>}\r\n                            </h2>\r\n                            <div className=\"relative\">\r\n                                <Search className=\"absolute left-3 top-2.5 w-4 h-4 text-navy-400\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search records...\"\r\n                                    className=\"pl-10 pr-4 py-2 bg-navy-950/50 border border-navy-700 rounded-full text-xs text-steel-100 placeholder-navy-400 focus:outline-none focus:border-gold-600/50 transition-colors w-64\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {activeTab === \"live\" && (\r\n                            <div className=\"p-6\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                                    {users.filter(u => u.liveProgress).length === 0 ? (\r\n                                        <div className=\"col-span-full p-12 text-center text-steel-500 italic border border-dashed border-navy-700 rounded-lg\">\r\n                                            No ongoing assessments at this moment.\r\n                                        </div>\r\n                                    ) : (\r\n                                        users.filter(u => u.liveProgress).map(user => (\r\n                                            <div key={user.id} className=\"bg-navy-900/50 border border-navy-700 rounded-xl p-6 shadow-lg relative overflow-hidden group hover:border-gold-500/30 transition-all\">\r\n                                                <div className=\"flex justify-between items-start mb-4\">\r\n                                                    <div>\r\n                                                        <h3 className=\"font-bold text-white text-lg\">{user.name}</h3>\r\n                                                        <p className=\"text-gold-500 font-mono text-xs\">{user.officialId}</p>\r\n                                                    </div>\r\n                                                    <span className=\"px-2 py-1 bg-blue-500/10 text-blue-400 border border-blue-500/20 rounded text-[10px] font-bold uppercase animate-pulse\">\r\n                                                        Active\r\n                                                    </span>\r\n                                                </div>\r\n\r\n                                                <div className=\"space-y-4\">\r\n                                                    <div>\r\n                                                        <div className=\"flex justify-between text-xs text-steel-400 mb-1\">\r\n                                                            <span>Module</span>\r\n                                                            <span className=\"text-white font-medium\">{user.liveProgress?.module}</span>\r\n                                                        </div>\r\n                                                        <div className=\"flex justify-between text-xs text-steel-400 mb-1\">\r\n                                                            <span>Progress</span>\r\n                                                            <span className=\"text-gold-400 font-mono\">{user.liveProgress?.current} / {user.liveProgress?.total}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    <div className=\"h-2 bg-navy-950 rounded-full overflow-hidden border border-navy-800\">\r\n                                                        <div\r\n                                                            className=\"h-full bg-gradient-to-r from-gold-600 to-gold-400 rounded-full shadow-[0_0_10px_rgba(234,179,8,0.3)] transition-all duration-1000 ease-out\"\r\n                                                            style={{ width: `${user.liveProgress?.percentage}%` }}\r\n                                                        />\r\n                                                    </div>\r\n\r\n                                                    <div className=\"pt-2 border-t border-navy-800 flex justify-between items-center\">\r\n                                                        <span className=\"text-[10px] text-steel-500\">Started just now</span>\r\n                                                        <span className=\"text-xl font-bold text-white\">{user.liveProgress?.percentage}%</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === \"users\" && (\r\n                            <div className=\"overflow-x-auto\">\r\n                                <table className=\"w-full text-left\">\r\n                                    <thead>\r\n                                        <tr className=\"bg-navy-900/50 text-xs uppercase tracking-wider text-steel-400 font-semibold border-b border-navy-700\">\r\n                                            <th className=\"px-6 py-4\">Official No</th>\r\n                                            <th className=\"px-6 py-4\">Name & Rank</th>\r\n                                            <th className=\"px-6 py-4\">Status</th>\r\n                                            <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"divide-y divide-navy-700/30\">\r\n                                        {users.length === 0 ? (\r\n                                            <tr>\r\n                                                <td colSpan={4} className=\"px-6 py-8 text-center text-steel-500 text-sm\">\r\n                                                    No active personnel found.\r\n                                                </td>\r\n                                            </tr>\r\n                                        ) : (\r\n                                            users.map((user) => (\r\n                                                <tr key={user.id} className=\"group hover:bg-navy-700/20 transition-colors\">\r\n                                                    <td className=\"px-6 py-4 font-mono text-gold-400 text-sm\">{user.officialId}</td>\r\n                                                    <td className=\"px-6 py-4 text-steel-100 font-medium text-sm\">{user.name}</td>\r\n                                                    <td className=\"px-6 py-4\">\r\n                                                        <span className={`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border ${user.status.includes(\"In Quiz\")\r\n                                                            ? \"bg-blue-500/10 text-blue-400 border-blue-500/20\"\r\n                                                            : user.status === \"Active\"\r\n                                                                ? \"bg-emerald-500/10 text-emerald-400 border-emerald-500/20\"\r\n                                                                : \"bg-navy-900 text-steel-500 border-navy-700\"\r\n                                                            }`}>\r\n                                                            <span className={`w-1.5 h-1.5 rounded-full ${user.status.includes(\"In Quiz\") ? \"bg-blue-400 animate-pulse\" :\r\n                                                                user.status === \"Active\" ? \"bg-emerald-400\" : \"bg-steel-500\"\r\n                                                                }`}></span>\r\n                                                            {user.status}\r\n                                                        </span>\r\n                                                    </td>\r\n                                                    <td className=\"px-6 py-4 text-right\">\r\n                                                        <button\r\n                                                            onClick={() => setSelectedUser(user)}\r\n                                                            className=\"text-[10px] font-bold text-gold-500/80 hover:text-gold-400 uppercase tracking-wider border border-gold-600/30 hover:border-gold-500 px-3 py-1 rounded-sm transition-all\"\r\n                                                        >\r\n                                                            Details\r\n                                                        </button>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))\r\n                                        )}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === \"history\" && (\r\n                            <div className=\"overflow-x-auto\">\r\n                                <table className=\"w-full text-left\">\r\n                                    <thead>\r\n                                        <tr className=\"bg-navy-900/50 text-xs uppercase tracking-wider text-steel-400 font-semibold border-b border-navy-700\">\r\n                                            <th className=\"px-6 py-4\">Date</th>\r\n                                            <th className=\"px-6 py-4\">User</th>\r\n                                            <th className=\"px-6 py-4\">Module</th>\r\n                                            <th className=\"px-6 py-4 text-center\">Score</th>\r\n                                            <th className=\"px-6 py-4 text-right\">Result</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"divide-y divide-navy-700/30\">\r\n                                        {attempts.length === 0 ? (\r\n                                            <tr>\r\n                                                <td colSpan={5} className=\"px-6 py-8 text-center text-steel-500 text-sm\">\r\n                                                    No assessment history available.\r\n                                                </td>\r\n                                            </tr>\r\n                                        ) : (\r\n                                            attempts.map((attempt) => (\r\n                                                <tr key={attempt.id} className=\"hover:bg-navy-700/20 transition-colors\">\r\n                                                    <td className=\"px-6 py-4 text-steel-400 text-xs font-mono\">{attempt.date}</td>\r\n                                                    <td className=\"px-6 py-4 text-gold-400 font-mono text-sm\">{attempt.user}</td>\r\n                                                    <td className=\"px-6 py-4 text-steel-100 text-sm\">{attempt.module}</td>\r\n                                                    <td className=\"px-6 py-4 text-center\">\r\n                                                        <span className=\"text-white font-bold\">{attempt.score}</span>\r\n                                                        <span className=\"text-steel-600 text-xs\"> / {attempt.total}</span>\r\n                                                    </td>\r\n                                                    <td className=\"px-6 py-4 text-right\">\r\n                                                        <span className={`font-mono font-bold text-sm ${(attempt.score / attempt.total) >= 0.5 ? \"text-emerald-400\" : \"text-red-400\"\r\n                                                            }`}>\r\n                                                            {Math.round((attempt.score / attempt.total) * 100)}%\r\n                                                        </span>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))\r\n                                        )}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                </section>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}